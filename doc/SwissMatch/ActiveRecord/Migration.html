<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: SwissMatch::ActiveRecord::Migration
  
    &mdash; Documentation by YARD 0.7.2
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (M)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../SwissMatch.html" title="SwissMatch (module)">SwissMatch</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../ActiveRecord.html" title="SwissMatch::ActiveRecord (module)">ActiveRecord</a></span></span>
     &raquo; 
    <span class="title">Migration</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: SwissMatch::ActiveRecord::Migration
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">ActiveRecord::Migration</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Migration</li>
          
            <li class="next">SwissMatch::ActiveRecord::Migration</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/swissmatch/activerecord.rb</dd>
  
</dl>
<div class="clear"></div>



  


  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#down-instance_method" title="#down (instance method)">- (Object) <strong>down</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#up-instance_method" title="#up (instance method)">- (Object) <strong>up</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="down-instance_method">
  
    - (<tt>Object</tt>) <strong>down</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109
110
111</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/swissmatch/activerecord.rb', line 107</span>

<span class='kw'>def</span> <span class='id down'>down</span>
  <span class='id drop_table'>drop_table</span> <span class='symbol'>:swissmatch_zip_codes</span>
  <span class='id drop_table'>drop_table</span> <span class='symbol'>:swissmatch_communities</span>
  <span class='id drop_table'>drop_table</span> <span class='symbol'>:swissmatch_cantons</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="up-instance_method">
  
    - (<tt>Object</tt>) <strong>up</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/swissmatch/activerecord.rb', line 113</span>

<span class='kw'>def</span> <span class='id up'>up</span>
  <span class='id create_table'>create_table</span> <span class='symbol'>:swissmatch_cantons</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>All swiss cantons as needed by swiss posts MAT[CH], includes the non-cantons DE and IT.</span><span class='tstring_end'>'</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id t'>t</span><span class='op'>|</span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span> <span class='symbol'>:id</span><span class='comma'>,</span>          <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>6</span><span class='comma'>,</span>  <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>A unique ID, unrelated to the swiss postal service data.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span>  <span class='symbol'>:license_tag</span><span class='comma'>,</span> <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='comma'>,</span>  <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The two letter abbreviation of the cantons name as used on license plates.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span>  <span class='symbol'>:name</span><span class='comma'>,</span>        <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>32</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The official name of the canton.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span>  <span class='symbol'>:name_de</span><span class='comma'>,</span>     <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>32</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The name of the canton in german.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span>  <span class='symbol'>:name_fr</span><span class='comma'>,</span>     <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>32</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The name of the canton in french.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span>  <span class='symbol'>:name_it</span><span class='comma'>,</span>     <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>32</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The name of the canton in italian.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span>  <span class='symbol'>:name_rt</span><span class='comma'>,</span>     <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>32</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The name of the canton in rheto-romanic.</span><span class='tstring_end'>'</span></span>

    <span class='id t'>t</span><span class='period'>.</span><span class='id timestamps'>timestamps</span>
  <span class='kw'>end</span>

  <span class='id create_table'>create_table</span> <span class='symbol'>:swissmatch_communities</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The swiss communities as per plz_c file from the swiss posts MAT[CH].</span><span class='tstring_end'>'</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id t'>t</span><span class='op'>|</span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span>  <span class='symbol'>:id</span><span class='comma'>,</span>                <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>6</span><span class='comma'>,</span>  <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>A unique, never recycled identification number. Also known as BFSNR.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span>   <span class='symbol'>:name</span><span class='comma'>,</span>              <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>32</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The official name of the community.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span>  <span class='symbol'>:canton_id</span><span class='comma'>,</span>         <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>6</span><span class='comma'>,</span>  <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The canton this community belongs to.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span>  <span class='symbol'>:agglomeration_id</span><span class='comma'>,</span>  <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>6</span><span class='comma'>,</span>  <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The community this community is considered to be an agglomeration of. Note that a main community will reference itself.</span><span class='tstring_end'>'</span></span>

    <span class='id t'>t</span><span class='period'>.</span><span class='id timestamps'>timestamps</span>
  <span class='kw'>end</span>

  <span class='id create_table'>create_table</span> <span class='symbol'>:swissmatch_zip_codes</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The swiss zip codes as per plz_p1 and plz_p2 files from the swiss posts MAT[CH].</span><span class='tstring_end'>'</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id t'>t</span><span class='op'>|</span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span> <span class='symbol'>:id</span><span class='comma'>,</span>                    <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>6</span><span class='comma'>,</span>  <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The postal ordering number, also known as ONRP. Unique and never recycled.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span> <span class='symbol'>:type</span><span class='comma'>,</span>                  <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>16</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The type of the entry. One of 10 (Domizil- und Fachadressen), 20 (Nur Domiziladressen), 30 (Nur Fach-PLZ), 40 (Firmen-PLZ) or 80 (Postinterne PLZ).</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span> <span class='symbol'>:code</span><span class='comma'>,</span>                  <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>16</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The 4 digit numeric zip code. Note that the 4 digit code alone does not uniquely identify a zip code record.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span> <span class='symbol'>:add_on</span><span class='comma'>,</span>                <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>16</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The 2 digit numeric code addition, to distinguish zip codes with the same 4 digit code.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span> <span class='symbol'>:canton_id</span><span class='comma'>,</span>             <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>6</span><span class='comma'>,</span>  <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The canton this zip code belongs to.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span>  <span class='symbol'>:name</span><span class='comma'>,</span>                  <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>27</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The name (city) that belongs to this zip code. At a maximum 27 characters long.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span>  <span class='symbol'>:name_de</span><span class='comma'>,</span>               <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>27</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The name (city) in german that belongs to this zip code. At a maximum 27 characters long.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span>  <span class='symbol'>:name_fr</span><span class='comma'>,</span>               <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>27</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The name (city) in french that belongs to this zip code. At a maximum 27 characters long.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span>  <span class='symbol'>:name_it</span><span class='comma'>,</span>               <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>27</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The name (city) in italian that belongs to this zip code. At a maximum 27 characters long.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span>  <span class='symbol'>:name_rt</span><span class='comma'>,</span>               <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>27</span><span class='comma'>,</span> <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The name (city) in rheto-romanic that belongs to this zip code. At a maximum 27 characters long.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span> <span class='symbol'>:language</span><span class='comma'>,</span>              <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='comma'>,</span>  <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The main language in the area of this zip code. 1 = de, 2 = fr, 3 = it, 4 = rt.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span> <span class='symbol'>:language_alternative</span><span class='comma'>,</span>  <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='comma'>,</span>  <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The second most used language in the area of this zip code. 1 = de, 2 = fr, 3 = it, 4 = rt.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id boolean'>boolean</span> <span class='symbol'>:sortfile_member</span><span class='comma'>,</span>                     <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Whether this ZipCode instance is included in the MAT[CH]sort sortfile.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span> <span class='symbol'>:delivery_by_id</span><span class='comma'>,</span>        <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>6</span><span class='comma'>,</span>  <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>[CURRENTLY NOT USED] By which postal office delivery of letters is usually taken care of.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span> <span class='symbol'>:community_id</span><span class='comma'>,</span>          <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>6</span><span class='comma'>,</span>  <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>The community this zip code belongs to.</span><span class='tstring_end'>'</span></span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id boolean'>boolean</span> <span class='symbol'>:active</span><span class='comma'>,</span>                              <span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Whether this record is currently active.</span><span class='tstring_end'>'</span></span>
<span class='comment'>#           t.date    :valid_from,                          :comment =&gt; 'The date from which on this zip code starts to be in use.'
</span><span class='comment'>#           t.date    :valid_until,                         :comment =&gt; '[CURRENTLY NOT USED] The date until which this zip code is in use.'
</span>
    <span class='id t'>t</span><span class='period'>.</span><span class='id timestamps'>timestamps</span>
  <span class='kw'>end</span>

  <span class='id add_index'>add_index</span> <span class='symbol'>:swissmatch_zip_codes</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:code</span><span class='rbracket'>]</span>

  <span class='comment'># not every db supports foreign key constraints, and maybe there are also syntax differences,
</span>  <span class='comment'># hence wrap it
</span>  <span class='kw'>begin</span>
    <span class='id execute'>execute</span> <span class='heredoc_beg'>&lt;&lt;-SQL</span>
<span class='tstring_content'>      ALTER TABLE swissmatch_communities
        ADD CONSTRAINT fk_sm_com_0001 FOREIGN KEY (canton_id) REFERENCES swissmatch_cantons(id)
        ADD CONSTRAINT fk_sm_com_0002 FOREIGN KEY (agglomeration_id) REFERENCES swissmatch_communities(id)
</span><span class='heredoc_end'>    SQL
</span>    <span class='id execute'>execute</span> <span class='heredoc_beg'>&lt;&lt;-SQL</span>
<span class='tstring_content'>      ALTER TABLE swissmatch_zip_codes
        ADD CONSTRAINT fk_sm_zip_0001 FOREIGN KEY (canton_id) REFERENCES swissmatch_cantons(id)
        ADD CONSTRAINT fk_sm_zip_0002 FOREIGN KEY (community_id) REFERENCES swissmatch_communities(id)
        ADD CONSTRAINT fk_sm_zip_0003 FOREIGN KEY (delivery_by_id) REFERENCES swissmatch_zip_codes(id)
</span><span class='heredoc_end'>    SQL
</span>  <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
    <span class='id warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No foreign key support (</span><span class='embexpr_beg'>#{</span><span class='id e'>e</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Mar 19 13:06:17 2012 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.2).
</div>

  </body>
</html>